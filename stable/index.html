<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Node HL7 Server - v3.0.1-beta.1</title><meta name="description" content="Documentation for Node HL7 Server"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><style>
				.tsd-ext-version-select .settings-label {
					margin: 0.75rem 0.75rem 0 0;
			</style></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://github.com/Bugs5382/node-hl7-server">GitHub</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Node HL7 Server - v3.0.1-beta.1</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>Node HL7 Server - v3.0.1-beta.1</h1></div><div class="tsd-panel tsd-typography"><a id="md:node-hl7-server" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Node HL7 Server<a href="#md:node-hl7-server" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Node.js client library for creating a HL7 Server which can accept incoming a properly formatted HL7 message(s), and then parses the HL7 message. Once the message has been parsed you can then do something with the final result that you so desire.</p>
<p>Benefits:</p>
<ul>
<li>No other main dependencies (other than the sister app called <a href="https://www.npmjs.com/package/node-hl7-client" target="_blank" class="external">node-hl7-client</a> which also uses no other external dependencies), making this ultra-fast.</li>
<li>Automatically re-connect, re-subscribe, or retry sending</li>
<li>Written in typescript and published with heavily commented type definitions</li>
<li>Intuitive API with named parameters instead of positional</li>
<li>TLS/SSL Support for clients connecting, if you want.</li>
<li>Typescript, CommonJS, ESM formats all available in one package.</li>
</ul>
<a id="md:table-of-contents" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Table of Contents<a href="#md:table-of-contents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li><a href="#md:acknowledgements">Acknowledgements</a></li>
<li><a href="#md:Keyword-Definitions">Keyword Definitions</a></li>
<li><a href="#md:install">Basic Install</a></li>
<li><a href="#md:license">License</a></li>
</ol>
<a id="md:keyword-definitions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Keyword Definitions<a href="#md:keyword-definitions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This NPM is designed to support medical applications with potential impact on patient care and diagnoses, this package documentation, and it's peer package <a href="">node-hl7-server</a> follow these definitions when it comes to the documentation.</p>
<p>Keywords such as &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;,
&quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot;.
These are standardized terms for technology documentation interoperability.
These words should have these meaning when you are reading them.
They might be sans uppercase throughout the documentation, but they would have the same meaning regardless.</p>
<ul>
<li><strong>MUST</strong> - This word, or the terms &quot;<strong>REQUIRED</strong>&quot; or &quot;<strong>SHALL</strong>&quot;, mean that the definition is an absolute requirement of the specification.</li>
<li><strong>MUST NOT</strong> - This phrase, or the phrase &quot;<strong>SHALL NOT</strong>&quot;, mean that the definition is an absolute prohibition of the specification.</li>
<li><strong>SHOULD</strong> - This word, or the adjective &quot;<strong>RECOMMENDED</strong>&quot;, mean that there may exist valid reasons in particular circumstances to ignore a particular item, but the full implications must be understood and carefully weighed before choosing a different course.</li>
<li><strong>SHOULD NOT</strong> - This phrase, or the phrase &quot;<strong>NOT RECOMMENDED</strong>&quot;, mean that there may exist valid reasons in particular circumstances when the particular behavior is acceptable or even useful. The full implications should be understood and the case carefully weighed before implementing any behavior described with this label.</li>
<li><strong>MAY</strong> - This word, or the adjective &quot;<strong>OPTIONAL</strong>&quot;, mean that an item is truly optional.  Any implementation which does not include a particular option MUST be prepared to interoperate with another implementation which does include the option, though perhaps with reduced functionality. In the same vein, an implementation which does include a particular option MUST be prepared to interoperate with another implementation, which does not include the option (except, of course, for the feature the option provides.)</li>
</ul>
<a id="md:install" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Install<a href="#md:install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Install using NPM into your package:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> </span><span class="hl-0">node</span><span class="hl-1">-</span><span class="hl-0">hl7</span><span class="hl-1">-</span><span class="hl-0">server</span>
</code><button>Copy</button></pre>

<p>It has one external dependency of <code>node-hl7-client</code>
as it uses this package to generate the acknowledgement message back to the client
and also parse the informing message from the server.</p>
<a id="md:basic-usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Basic Usage<a href="#md:basic-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Non-TLS:</p>
<pre><code class="ts"><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">Server</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;node-hl7-server&#39;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">server</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Server</span><span class="hl-1">()</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">IB</span><span class="hl-1"> = </span><span class="hl-0">server</span><span class="hl-1">.</span><span class="hl-6">createInbound</span><span class="hl-1">({</span><span class="hl-0">port:</span><span class="hl-1"> </span><span class="hl-7">3000</span><span class="hl-1">}, </span><span class="hl-4">async</span><span class="hl-1"> (</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">messageReq</span><span class="hl-1"> = </span><span class="hl-0">req</span><span class="hl-1">.</span><span class="hl-6">getMessage</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">messageRes</span><span class="hl-1"> = </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-6">getAckMessage</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-8">// do your code here</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<p>This will start a basic server on port 3000 with basic functionally.</p>
<p>Before your app shuts down, you should run:</p>
<pre><code class="ts"><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-5">IB</span><span class="hl-1">.</span><span class="hl-6">close</span><span class="hl-1">()</span>
</code><button type="button">Copy</button></pre>

<p>To end the connections.</p>
<p>An HL7 server is designed to be up ready to accept connections at any time, so shutting it down shouldn't really happen.
Your app needs to be responsible for memory leaks.
The server does close the connection once it's finished a reply to the client.</p>
<p>TLS:</p>
<pre><code class="ts"><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">Server</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;node-hl7-server&#39;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">server</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Server</span><span class="hl-1">(</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">tls:</span><br/><span class="hl-1">            {</span><br/><span class="hl-1">                </span><span class="hl-0">key:</span><span class="hl-1"> </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readFileSync</span><span class="hl-1">(</span><span class="hl-0">path</span><span class="hl-1">.</span><span class="hl-6">join</span><span class="hl-1">(</span><span class="hl-3">&#39;certs/&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;server-key.pem&#39;</span><span class="hl-1">)), </span><span class="hl-8">// where your certs are</span><br/><span class="hl-1">                </span><span class="hl-0">cert:</span><span class="hl-1"> </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-6">readFileSync</span><span class="hl-1">(</span><span class="hl-0">path</span><span class="hl-1">.</span><span class="hl-6">join</span><span class="hl-1">(</span><span class="hl-3">&#39;certs/&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;server-crt.pem&#39;</span><span class="hl-1">)), </span><span class="hl-8">// where your certs are</span><br/><span class="hl-1">                </span><span class="hl-0">rejectUnauthorized:</span><span class="hl-1"> </span><span class="hl-4">false</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">    })</span>
</code><button type="button">Copy</button></pre>

<p>When you get a message, you can then parse any segment of the message and do you need to in order for your app to work.</p>
<pre><code class="ts"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">IB_ADT</span><span class="hl-1"> = </span><span class="hl-0">server</span><span class="hl-1">.</span><span class="hl-6">createInbound</span><span class="hl-1">({</span><span class="hl-0">port:</span><span class="hl-1"> </span><span class="hl-5">LISTEN_PORT</span><span class="hl-1">}, </span><span class="hl-4">async</span><span class="hl-1"> (</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">messageReq</span><span class="hl-1"> = </span><span class="hl-0">req</span><span class="hl-1">.</span><span class="hl-6">getMessage</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">messageRes</span><span class="hl-1"> = </span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-6">getAckMessage</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">hl7Version</span><span class="hl-1"> = </span><span class="hl-0">messageReq</span><span class="hl-1">.</span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-3">&#39;MSH.12&#39;</span><span class="hl-1">).</span><span class="hl-6">toString</span><span class="hl-1">()</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<p>In this case... <code>res.getAckMessage()</code> returns a Message object from <code>node-hl7-client</code>.
Then you can query the segment <code>MSH.12</code> in this instance and get its result.</p>
<p>Please consult <a href="https://www.npmjs.com/package/node-hl7-client" target="_blank" class="external">node-hl7-client</a> documentation for further ways to parse the message segment.</p>
<a id="md:override-response-msh-fields" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Override response MSH fields<a href="#md:override-response-msh-fields" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Individual response MSH segment fields can be overridden by passing the optional <code>mshOverrides</code> prop to <code>server.createInbound</code>.</p>
<p>For example, the following overrides the default MSH field 9.3 value to &quot;ACK&quot;:</p>
<pre><code class="ts"><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">listener</span><span class="hl-1"> = </span><span class="hl-0">server</span><span class="hl-1">.</span><span class="hl-6">createInbound</span><span class="hl-1">({ </span><span class="hl-0">port:</span><span class="hl-1"> </span><span class="hl-7">3000</span><span class="hl-1">, </span><span class="hl-0">mshOverrides:</span><span class="hl-1"> { </span><span class="hl-3">&#39;9.3&#39;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-3">&#39;ACK&#39;</span><span class="hl-1"> }}, </span><span class="hl-4">async</span><span class="hl-1"> (</span><span class="hl-0">req</span><span class="hl-1">, </span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {})</span>
</code><button type="button">Copy</button></pre>

<a id="md:docker" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Docker<a href="#md:docker" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-9">docker</span><span class="hl-1">:</span><span class="hl-0">build</span>
</code><button>Copy</button></pre>

<p>This package, if you download from source,
comes with a DockerFile to build a simple docker image with a basic node-hl7-server running.
All the server does is respond &quot;success&quot; to all properly formatted HL7 messages.</p>
<p>If you want more a custom instance of this server, download the GIT,
and modify <code>docker/server.js</code> to your liking and then build the docker image and run it.</p>
<p>Suggestions? Open a PR!</p>
<a id="md:documentation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Documentation<a href="#md:documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>GitHub pages now has mostly full listing of all methods, classes, etc., but only for the most recent release.
You can view it <a href="https://bugs5382.github.io/node-hl7-server/" target="_blank" class="external">here</a>.</p>
<a id="md:acknowledgements" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Acknowledgements<a href="#md:acknowledgements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Code Design/Auto Re-Connect/Resend, Inspiration: <a href="https://github.com/cody-greene/node-rabbitmq-client" target="_blank" class="external">node-rabbitmq-client</a></li>
<li>My Wife and Baby Girl.</li>
</ul>
<a id="md:license" class="tsd-anchor"></a><h2 class="tsd-anchor-link">License<a href="#md:license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Licensed under <a href="media/LICENSE">MIT</a>.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-ext-version-select"><label class="settings-label" for="plugin-versions-select">Version</label><select id="plugin-versions-select" name="versions"></select></div><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-alpha" name="alpha"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Alpha</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-beta" name="beta"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Beta</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:node-hl7-server"><span>Node HL7 <wbr/>Server</span></a><a href="#md:table-of-contents"><span>Table of <wbr/>Contents</span></a><a href="#md:keyword-definitions"><span>Keyword <wbr/>Definitions</span></a><a href="#md:install"><span>Install</span></a><a href="#md:basic-usage"><span>Basic <wbr/>Usage</span></a><ul><li><a href="#md:override-response-msh-fields"><span>Override response MSH fields</span></a></li></ul><a href="#md:docker"><span>Docker</span></a><a href="#md:documentation"><span>Documentation</span></a><a href="#md:acknowledgements"><span>Acknowledgements</span></a><a href="#md:license"><span>License</span></a></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/Bugs5382/node-hl7-server" class="tsd-nav-link">GitHub</a></nav><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>Node HL7 Server - v3.0.1-beta.1</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div><script src="assets/versionsMenu.js" type="module"></script></body></html>
